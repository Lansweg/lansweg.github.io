import React, { useState, useEffect } from ‚Äòreact‚Äô;
import { Calendar, Plus, CheckCircle, TrendingUp, Droplets, Dumbbell, User, LogOut, Clock, BarChart3, Trash2, Edit, Save, X } from ‚Äòlucide-react‚Äô;

const CompleteWorkoutTracker = () => {
const [isLoggedIn, setIsLoggedIn] = useState(false);
const [currentUser, setCurrentUser] = useState(null);
const [showLogin, setShowLogin] = useState(true);
const [username, setUsername] = useState(‚Äô‚Äô);
const [password, setPassword] = useState(‚Äô‚Äô);

const [currentWeek, setCurrentWeek] = useState(1);
const [totalWeeks, setTotalWeeks] = useState(4);
const [workouts, setWorkouts] = useState([]);
const [exerciseLibrary, setExerciseLibrary] = useState([]);
const [showAddWorkout, setShowAddWorkout] = useState(false);
const [showExerciseSelector, setShowExerciseSelector] = useState(false);
const [currentWorkoutData, setCurrentWorkoutData] = useState(null);
const [selectedExercises, setSelectedExercises] = useState([]);
const [activeTimer, setActiveTimer] = useState(null);
const [timerSeconds, setTimerSeconds] = useState(0);
const [view, setView] = useState(‚Äòworkouts‚Äô); // workouts, calendar, stats, nutrition

// Exercise library with categories
const defaultExercises = {
chest: [
{ id: ‚Äòbench-press‚Äô, name: ‚ÄòD√©velopp√© couch√©‚Äô, muscle: ‚ÄòPectoraux‚Äô },
{ id: ‚Äòincline-press‚Äô, name: ‚ÄòD√©velopp√© inclin√©‚Äô, muscle: ‚ÄòPectoraux haut‚Äô },
{ id: ‚Äòdips‚Äô, name: ‚ÄòDips‚Äô, muscle: ‚ÄòPectoraux/Triceps‚Äô },
{ id: ‚Äòpush-ups‚Äô, name: ‚ÄòPompes‚Äô, muscle: ‚ÄòPectoraux‚Äô }
],
back: [
{ id: ‚Äòrowing‚Äô, name: ‚ÄòRowing barre‚Äô, muscle: ‚ÄòDos‚Äô },
{ id: ‚Äòpull-ups‚Äô, name: ‚ÄòTractions‚Äô, muscle: ‚ÄòDos‚Äô },
{ id: ‚Äòlat-pulldown‚Äô, name: ‚ÄòTirage vertical‚Äô, muscle: ‚ÄòDorsaux‚Äô },
{ id: ‚Äòdeadlift‚Äô, name: ‚ÄòSoulev√© de terre‚Äô, muscle: ‚ÄòDos/Lombaires‚Äô }
],
shoulders: [
{ id: ‚Äòmilitary-press‚Äô, name: ‚ÄòD√©velopp√© militaire‚Äô, muscle: ‚Äò√âpaules‚Äô },
{ id: ‚Äòlateral-raises‚Äô, name: ‚Äò√âl√©vations lat√©rales‚Äô, muscle: ‚Äò√âpaules‚Äô },
{ id: ‚Äòfront-raises‚Äô, name: ‚Äò√âl√©vations frontales‚Äô, muscle: ‚Äò√âpaules avant‚Äô }
],
arms: [
{ id: ‚Äòbicep-curl‚Äô, name: ‚ÄòCurl biceps‚Äô, muscle: ‚ÄòBiceps‚Äô },
{ id: ‚Äòhammer-curl‚Äô, name: ‚ÄòCurl marteau‚Äô, muscle: ‚ÄòBiceps‚Äô },
{ id: ‚Äòtricep-extension‚Äô, name: ‚ÄòExtensions triceps‚Äô, muscle: ‚ÄòTriceps‚Äô },
{ id: ‚Äòclose-grip-bench‚Äô, name: ‚ÄòD√©velopp√© prise serr√©e‚Äô, muscle: ‚ÄòTriceps‚Äô }
],
legs: [
{ id: ‚Äòsquat‚Äô, name: ‚ÄòSquat‚Äô, muscle: ‚ÄòQuadriceps‚Äô },
{ id: ‚Äòleg-press‚Äô, name: ‚ÄòPresse √† cuisses‚Äô, muscle: ‚ÄòQuadriceps‚Äô },
{ id: ‚Äòlunges‚Äô, name: ‚ÄòFentes‚Äô, muscle: ‚ÄòQuadriceps/Fessiers‚Äô },
{ id: ‚Äòleg-curl‚Äô, name: ‚ÄòLeg curl‚Äô, muscle: ‚ÄòIschios‚Äô },
{ id: ‚Äòcalf-raises‚Äô, name: ‚ÄòMollets debout‚Äô, muscle: ‚ÄòMollets‚Äô }
],
core: [
{ id: ‚Äòplank‚Äô, name: ‚ÄòGainage‚Äô, muscle: ‚ÄòAbdos‚Äô },
{ id: ‚Äòcrunches‚Äô, name: ‚ÄòCrunch‚Äô, muscle: ‚ÄòAbdos‚Äô },
{ id: ‚Äòleg-raises‚Äô, name: ‚ÄòLev√©e de jambes‚Äô, muscle: ‚ÄòAbdos bas‚Äô }
]
};

// Load data from persistent storage
useEffect(() => {
loadUserData();
}, [currentUser]);

useEffect(() => {
let interval;
if (activeTimer !== null && timerSeconds > 0) {
interval = setInterval(() => {
setTimerSeconds(prev => {
if (prev <= 1) {
setActiveTimer(null);
playSound();
return 0;
}
return prev - 1;
});
}, 1000);
}
return () => clearInterval(interval);
}, [activeTimer, timerSeconds]);

const playSound = () => {
// Simple beep sound notification
const audio = new Audio(‚Äòdata:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBjmO1fPTgjMGHm7A7+OZURE‚Äô);
audio.play().catch(() => {});
};

const loadUserData = async () => {
if (!currentUser) return;

```
try {
  const workoutsData = await window.storage.get(`workouts_${currentUser}`);
  if (workoutsData) {
    setWorkouts(JSON.parse(workoutsData.value));
  }
  
  const weeksData = await window.storage.get(`weeks_${currentUser}`);
  if (weeksData) {
    setTotalWeeks(parseInt(weeksData.value));
  }
} catch (error) {
  console.log('No saved data yet');
}
```

};

const saveUserData = async () => {
if (!currentUser) return;

```
try {
  await window.storage.set(`workouts_${currentUser}`, JSON.stringify(workouts));
  await window.storage.set(`weeks_${currentUser}`, totalWeeks.toString());
} catch (error) {
  console.error('Error saving data:', error);
}
```

};

useEffect(() => {
if (currentUser) {
saveUserData();
}
}, [workouts, totalWeeks, currentUser]);

const handleLogin = async () => {
if (!username || !password) return;

```
try {
  const userData = await window.storage.get(`user_${username}`);
  
  if (userData) {
    const user = JSON.parse(userData.value);
    if (user.password === password) {
      setCurrentUser(username);
      setIsLoggedIn(true);
    } else {
      alert('Mot de passe incorrect');
    }
  } else {
    alert('Utilisateur non trouv√©');
  }
} catch (error) {
  alert('Erreur de connexion');
}
```

};

const handleRegister = async () => {
if (!username || !password) return;

```
try {
  const exists = await window.storage.get(`user_${username}`);
  if (exists) {
    alert('Cet utilisateur existe d√©j√†');
    return;
  }
  
  await window.storage.set(`user_${username}`, JSON.stringify({
    username,
    password,
    createdAt: new Date().toISOString()
  }));
  
  setCurrentUser(username);
  setIsLoggedIn(true);
} catch (error) {
  alert('Erreur lors de l\'inscription');
}
```

};

const handleLogout = () => {
setIsLoggedIn(false);
setCurrentUser(null);
setUsername(‚Äô‚Äô);
setPassword(‚Äô‚Äô);
setWorkouts([]);
};

const startWorkout = (type) => {
setCurrentWorkoutData({
type,
date: new Date().toISOString(),
week: currentWeek,
exercises: [],
notes: ‚Äò‚Äô,
duration: 0
});
setSelectedExercises([]);
setShowAddWorkout(false);
setShowExerciseSelector(true);
};

const addExerciseToWorkout = (exercise) => {
const newExercise = {
‚Ä¶exercise,
sets: [{ reps: 10, weight: 0, completed: false }]
};
setSelectedExercises([‚Ä¶selectedExercises, newExercise]);
};

const addSetToExercise = (exerciseIndex) => {
const updated = [‚Ä¶selectedExercises];
updated[exerciseIndex].sets.push({ reps: 10, weight: 0, completed: false });
setSelectedExercises(updated);
};

const updateSet = (exerciseIndex, setIndex, field, value) => {
const updated = [‚Ä¶selectedExercises];
updated[exerciseIndex].sets[setIndex][field] = value;
setSelectedExercises(updated);
};

const toggleSetComplete = (exerciseIndex, setIndex) => {
const updated = [‚Ä¶selectedExercises];
updated[exerciseIndex].sets[setIndex].completed = !updated[exerciseIndex].sets[setIndex].completed;
setSelectedExercises(updated);
};

const saveWorkout = () => {
const workout = {
‚Ä¶currentWorkoutData,
exercises: selectedExercises,
id: Date.now()
};
setWorkouts([workout, ‚Ä¶workouts]);
setShowExerciseSelector(false);
setCurrentWorkoutData(null);
setSelectedExercises([]);
};

const deleteWorkout = (id) => {
if (confirm(‚ÄòSupprimer cette s√©ance ?‚Äô)) {
setWorkouts(workouts.filter(w => w.id !== id));
}
};

const startRestTimer = (seconds) => {
setTimerSeconds(seconds);
setActiveTimer(Date.now());
};

const addWeek = () => {
setTotalWeeks(totalWeeks + 1);
setCurrentWeek(totalWeeks + 1);
};

const getWorkoutStats = () => {
const weekWorkouts = workouts.filter(w => w.week === currentWeek);
const totalWorkouts = weekWorkouts.length;
const totalExercises = weekWorkouts.reduce((acc, w) => acc + w.exercises.length, 0);
const totalSets = weekWorkouts.reduce((acc, w) =>
acc + w.exercises.reduce((sum, e) => sum + e.sets.length, 0), 0
);
return { totalWorkouts, totalExercises, totalSets };
};

const stats = getWorkoutStats();

// Login/Register Screen
if (!isLoggedIn) {
return (
<div className="min-h-screen bg-gradient-to-br from-purple-600 via-blue-600 to-cyan-500 flex items-center justify-center p-4">
<div className="bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full">
<div className="text-center mb-8">
<div className="text-6xl mb-4">üèãÔ∏è‚Äç‚ôÇÔ∏è</div>
<h1 className="text-3xl font-bold text-gray-800 mb-2">Workout Tracker Pro</h1>
<p className="text-gray-600">Programme R√©my - Recomposition</p>
</div>

```
      <div className="mb-6">
        <label className="block text-sm font-semibold text-gray-700 mb-2">Nom d'utilisateur</label>
        <input
          type="text"
          value={username}
          onChange={(e) => setUsername(e.target.value)}
          className="w-full p-3 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:outline-none"
          placeholder="remy"
        />
      </div>

      <div className="mb-6">
        <label className="block text-sm font-semibold text-gray-700 mb-2">Mot de passe</label>
        <input
          type="password"
          value={password}
          onChange={(e) => setPassword(e.target.value)}
          className="w-full p-3 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:outline-none"
          placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
        />
      </div>

      <div className="flex gap-3">
        <button
          onClick={handleLogin}
          className="flex-1 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg font-semibold hover:shadow-lg transition-all"
        >
          Connexion
        </button>
        <button
          onClick={handleRegister}
          className="flex-1 py-3 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-lg font-semibold hover:shadow-lg transition-all"
        >
          Inscription
        </button>
      </div>

      <div className="mt-6 p-4 bg-blue-50 rounded-lg">
        <p className="text-sm text-blue-800">
          <strong>üí° Astuce :</strong> Cr√©ez votre compte pour sauvegarder automatiquement toutes vos donn√©es !
        </p>
      </div>
    </div>
  </div>
);
```

}

// Main App
return (
<div className="min-h-screen bg-gradient-to-br from-purple-600 via-blue-600 to-cyan-500 p-4">
<div className="max-w-6xl mx-auto">
{/* Header */}
<div className="bg-white rounded-2xl shadow-2xl p-6 mb-6">
<div className="flex items-center justify-between mb-4">
<div>
<h1 className="text-3xl font-bold text-gray-800 flex items-center gap-2">
<Dumbbell className="text-orange-500" />
Workout Tracker Pro
</h1>
<p className="text-gray-600 mt-1">Bienvenue, <strong>{currentUser}</strong> üëã</p>
</div>
<button
onClick={handleLogout}
className="flex items-center gap-2 px-4 py-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-all"
>
<LogOut size={18} />
D√©connexion
</button>
</div>

```
      {/* Navigation */}
      <div className="flex gap-2 overflow-x-auto pb-2">
        <button
          onClick={() => setView('workouts')}
          className={`px-4 py-2 rounded-lg font-semibold whitespace-nowrap transition-all ${
            view === 'workouts' ? 'bg-gradient-to-r from-purple-600 to-blue-600 text-white' : 'bg-gray-100 text-gray-600'
          }`}
        >
          üèãÔ∏è S√©ances
        </button>
        <button
          onClick={() => setView('calendar')}
          className={`px-4 py-2 rounded-lg font-semibold whitespace-nowrap transition-all ${
            view === 'calendar' ? 'bg-gradient-to-r from-purple-600 to-blue-600 text-white' : 'bg-gray-100 text-gray-600'
          }`}
        >
          üìÖ Calendrier
        </button>
        <button
          onClick={() => setView('stats')}
          className={`px-4 py-2 rounded-lg font-semibold whitespace-nowrap transition-all ${
            view === 'stats' ? 'bg-gradient-to-r from-purple-600 to-blue-600 text-white' : 'bg-gray-100 text-gray-600'
          }`}
        >
          üìä Statistiques
        </button>
        <button
          onClick={() => setView('nutrition')}
          className={`px-4 py-2 rounded-lg font-semibold whitespace-nowrap transition-all ${
            view === 'nutrition' ? 'bg-gradient-to-r from-purple-600 to-blue-600 text-white' : 'bg-gray-100 text-gray-600'
          }`}
        >
          üçΩÔ∏è Nutrition
        </button>
      </div>
    </div>

    {/* Timer Widget */}
    {activeTimer && (
      <div className="bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-2xl shadow-2xl p-6 mb-6 text-center">
        <Clock size={40} className="mx-auto mb-2" />
        <div className="text-5xl font-bold mb-2">
          {Math.floor(timerSeconds / 60)}:{(timerSeconds % 60).toString().padStart(2, '0')}
        </div>
        <p className="text-lg">Temps de repos</p>
        <button
          onClick={() => setActiveTimer(null)}
          className="mt-4 px-6 py-2 bg-white text-orange-500 rounded-lg font-semibold hover:bg-gray-100"
        >
          Arr√™ter
        </button>
      </div>
    )}

    {/* Workouts View */}
    {view === 'workouts' && (
      <>
        <div className="bg-white rounded-2xl shadow-2xl p-6 mb-6">
          <div className="flex items-center justify-between mb-4">
            <h2 className="text-2xl font-bold text-gray-800">Semaine {currentWeek}</h2>
            <button
              onClick={() => setShowAddWorkout(true)}
              className="bg-gradient-to-r from-orange-500 to-red-500 text-white px-6 py-3 rounded-xl font-semibold flex items-center gap-2 hover:shadow-lg transition-all"
            >
              <Plus size={20} />
              Nouvelle s√©ance
            </button>
          </div>

          {/* Week Selector */}
          <div className="flex gap-2 mb-4 overflow-x-auto pb-2">
            {[...Array(totalWeeks)].map((_, i) => (
              <button
                key={i}
                onClick={() => setCurrentWeek(i + 1)}
                className={`px-4 py-2 rounded-lg font-semibold whitespace-nowrap transition-all ${
                  currentWeek === i + 1
                    ? 'bg-gradient-to-r from-purple-600 to-blue-600 text-white shadow-lg'
                    : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                }`}
              >
                S{i + 1}
              </button>
            ))}
            <button
              onClick={addWeek}
              className="px-4 py-2 rounded-lg font-semibold whitespace-nowrap bg-green-100 text-green-600 hover:bg-green-200 transition-all"
            >
              + Ajouter
            </button>
          </div>

          {/* Stats Cards */}
          <div className="grid grid-cols-3 gap-4">
            <div className="bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-xl">
              <div className="text-blue-700 text-sm font-medium mb-1">S√©ances</div>
              <div className="text-3xl font-bold text-blue-900">{stats.totalWorkouts}</div>
            </div>
            <div className="bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-xl">
              <div className="text-green-700 text-sm font-medium mb-1">Exercices</div>
              <div className="text-3xl font-bold text-green-900">{stats.totalExercises}</div>
            </div>
            <div className="bg-gradient-to-br from-purple-50 to-purple-100 p-4 rounded-xl">
              <div className="text-purple-700 text-sm font-medium mb-1">S√©ries</div>
              <div className="text-3xl font-bold text-purple-900">{stats.totalSets}</div>
            </div>
          </div>
        </div>

        {/* Workouts List */}
        <div className="space-y-4">
          {workouts.filter(w => w.week === currentWeek).map(workout => (
            <div key={workout.id} className="bg-white rounded-xl shadow-lg p-6">
              <div className="flex items-center justify-between mb-4">
                <div>
                  <h3 className="text-xl font-bold text-gray-800">{workout.type}</h3>
                  <p className="text-sm text-gray-500">{new Date(workout.date).toLocaleDateString('fr-FR')}</p>
                </div>
                <button
                  onClick={() => deleteWorkout(workout.id)}
                  className="text-red-500 hover:text-red-700 transition-colors"
                >
                  <Trash2 size={20} />
                </button>
              </div>

              {workout.exercises.map((exercise, idx) => (
                <div key={idx} className="mb-4 p-4 bg-gray-50 rounded-lg">
                  <div className="font-semibold text-gray-800 mb-2">{exercise.name}</div>
                  <div className="grid grid-cols-4 gap-2 text-sm">
                    {exercise.sets.map((set, setIdx) => (
                      <div
                        key={setIdx}
                        className={`p-2 rounded ${
                          set.completed ? 'bg-green-100 text-green-800' : 'bg-white text-gray-600'
                        }`}
                      >
                        S{setIdx + 1}: {set.weight}kg √ó {set.reps}
                      </div>
                    ))}
                  </div>
                </div>
              ))}

              {workout.notes && (
                <div className="mt-4 p-3 bg-yellow-50 rounded-lg text-sm text-gray-700">
                  üìù {workout.notes}
                </div>
              )}
            </div>
          ))}

          {workouts.filter(w => w.week === currentWeek).length === 0 && (
            <div className="bg-white rounded-xl shadow-lg p-12 text-center">
              <div className="text-6xl mb-4">üèãÔ∏è‚Äç‚ôÇÔ∏è</div>
              <h3 className="text-xl font-bold text-gray-800 mb-2">Aucune s√©ance cette semaine</h3>
              <p className="text-gray-600">Clique sur "Nouvelle s√©ance" pour commencer !</p>
            </div>
          )}
        </div>
      </>
    )}

    {/* Calendar View */}
    {view === 'calendar' && (
      <div className="bg-white rounded-2xl shadow-2xl p-6">
        <h2 className="text-2xl font-bold text-gray-800 mb-6">Calendrier des entra√Ænements</h2>
        <div className="grid grid-cols-7 gap-2">
          {['Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam', 'Dim'].map(day => (
            <div key={day} className="text-center font-semibold text-gray-600 py-2">
              {day}
            </div>
          ))}
          {[...Array(35)].map((_, i) => {
            const dayWorkouts = workouts.filter(w => {
              const workoutDate = new Date(w.date);
              return workoutDate.getDate() === (i % 30) + 1;
            });
            return (
              <div
                key={i}
                className={`aspect-square p-2 rounded-lg border-2 ${
                  dayWorkouts.length > 0
                    ? 'bg-green-50 border-green-500'
                    : 'bg-gray-50 border-gray-200'
                }`}
              >
                <div className="text-sm font-semibold text-gray-700">{(i % 30) + 1}</div>
                {dayWorkouts.length > 0 && (
                  <div className="text-xs text-green-600 mt-1">
                    {dayWorkouts.length} s√©ance{dayWorkouts.length > 1 ? 's' : ''}
                  </div>
                )}
              </div>
            );
          })}
        </div>
      </div>
    )}

    {/* Stats View */}
    {view === 'stats' && (
      <div className="bg-white rounded-2xl shadow-2xl p-6">
        <h2 className="text-2xl font-bold text-gray-800 mb-6">Statistiques globales</h2>
        
        <div className="grid grid-cols-2 gap-6 mb-8">
          <div className="p-6 bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl">
            <div className="text-purple-700 font-semibold mb-2">Total s√©ances</div>
            <div className="text-4xl font-bold text-purple-900">{workouts.length}</div>
          </div>
          <div className="p-6 bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl">
            <div className="text-blue-700 font-semibold mb-2">Total exercices</div>
            <div className="text-4xl font-bold text-blue-900">
              {workouts.reduce((acc, w) => acc + w.exercises.length, 0)}
            </div>
          </div>
          <div className="p-6 bg-gradient-to-br from-green-50 to-green-100 rounded-xl">
            <div className="text-green-700 font-semibold mb-2">Total s√©ries</div>
            <div className="text-4xl font-bold text-green-900">
              {workouts.reduce((acc, w) => 
                acc + w.exercises.reduce((sum, e) => sum + e.sets.length, 0), 0
              )}
            </div>
          </div>
          <div className="p-6 bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl">
            <div className="text-orange-700 font-semibold mb-2">Semaines actives</div>
            <div className="text-4xl font-bold text-orange-900">{totalWeeks}</div>
          </div>
        </div>

        <div className="border-t pt-6">
          <h3 className="text-xl font-bold text-gray-800 mb-4">Progression par semaine</h3>
          {[...Array(totalWeeks)].map((_, i) => {
            const weekNum = i + 1;
            const weekWorkouts = workouts.filter(w => w.week === weekNum).length;
            return (
              <div key={weekNum} className="mb-4">
                <div className="flex items-center justify-between mb-2">
                  <span className="font-semibold text-gray-700">Semaine {weekNum}</span>
                  <span className="text-sm text-gray-600">{weekWorkouts} s√©ances</span>
                </div>
                <div className="w-full bg-gray-200 rounded-full h-3">
                  <div
                    className="bg-gradient-to-r from-purple-600 to-blue-600 h-3 rounded-full transition-all"
                    style={{ width: `${(weekWorkouts / 7) * 100}%` }}
                  />
                </div>
              </div>
            );
          })}
        </div>
      </div>
    )}

    {/* Nutrition View */}
    {view === 'nutrition' && (
      <div className="bg-white rounded-2xl shadow-2xl p-6">
        <h2 className="text-2xl font-bold text-gray-800 mb-6">Plan Nutritionnel</h2>
        
        <div className="grid gap-6">
          <div className="p-6 bg-gradient-to-br from-yellow-50 to-orange-50 rounded-xl">
            <h3 className="text-xl font-bold text-orange-800 mb-4">üåÖ Petit-D√©jeuner</h3>
            <ul className="space-y-2 text-gray-700">
              <li>‚Ä¢ 60g flocons d'avoine</li>
              <li>‚Ä¢ 250ml lait</li>
              <li>‚Ä¢ 1 banane</li>
              <li>‚Ä¢ 30g whey</li>
              <li>‚Ä¢ 1 c.√†.s beurre de cacahu√®te</li>
            </ul>
          </div>

          <div className="p-6 bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl">
            <h3 className="text-xl font-bold text-green-800 mb-4">üçõ D√©jeuner</h3>
            <ul className="space-y-2 text-gray-700">
              <li>‚Ä¢ 150g poulet ou b≈ìuf maigre</li>
              <li>‚Ä¢ 120g riz complet ou quinoa</li>
              <li>‚Ä¢ L√©gumes vapeur (brocolis, courgettes)</li>
              <li>‚Ä¢ ¬Ω avocat ou 1 c.√†.s huile d'olive</li>
            </ul>
          </div>

          <div className="p-6 bg-gradient-to-br from-blue-50 to-cyan-50 rounded-xl">
            <h3 className="text-xl font-bold text-blue-800 mb-4">üåô D√Æner</h3>
            <ul className="space-y-2 text-gray-700">
              <li>‚Ä¢ 2 ≈ìufs + 1 blanc</li>
              <li>‚Ä¢ 100g riz ou quinoa</li>
              <li>‚Ä¢ L√©gumes (√©pinards, poivrons)</li>
              <li>‚Ä¢ 1 yaourt nature</li>
            </ul>
          </div>

          <div className="p-6 bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl">
            <h3 className="text-xl font-bold text-purple-800 mb-4">ü•§ Collations</h3>
            <div className="space-y-3 text-gray-700">
              <div>
                <strong>Pr√©-Training:</strong>
                <p className="ml-4">‚Ä¢ 1 banane + 1 yaourt grec + 10g amandes</p>
              </div>
              <div>
                <strong>Post-Training:</strong>
                <p className="ml-4">‚Ä¢ 30g whey + 1 fruit</p>
              </div>
            </div>
          </div>

          <div className="p-6 bg-gradient-to-br from-red-50 to-orange-50 rounded-xl">
            <h3 className="text-xl font-bold text-red-800 mb-4">üìä Macros Quotidiens (~120kg)</h3>
            <div className="grid grid-cols-3 gap-4 mt-4">
              <div className="text-center">
                <div className="text-3xl font-bold text-red-600">~240g</div>
                <div className="text-sm text-gray-600">Prot√©ines</div>
              </div>
              <div className="text-center">
                <div className="text-3xl font-bold text-blue-600">~270g</div>
                <div className="text-sm text-gray-600">Glucides</div>
              </div>
              <div className="text-center">
                <div className="text-3xl font-bold text-yellow-600">~75g</div>
                <div className="text-sm text-gray-600">Lipides</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    )}

    {/* Add Workout Modal */}
    {showAddWorkout && (
      <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
        <div className="bg-white rounded-2xl shadow-2xl max-w-md w-full p-6">
          <h2 className="text-2xl font-bold text-gray-800 mb-4">Type de s√©ance</h2>
          
          <div className="grid grid-cols-2 gap-3">
            <button
              onClick={() => startWorkout('Haut du corps')}
              className="p-4 border-2 border-gray-200 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all"
            >
              <div className="text-3xl mb-2">üí™</div>
              <div className="text-sm font-semibold">Haut du corps</div>
            </button>
            
            <button
              onClick={() => startWorkout('Bas du corps')}
              className="p-4 border-2 border-gray-200 rounded-xl hover:border-orange-500 hover:bg-orange-50 transition-all"
            >
              <div className="text-3xl mb-2">ü¶µ</div>
              <div className="text-sm font-semibold">Bas du corps</div>
            </button>
            
            <button
              onClick={() => startWorkout('Full Body A')}
              className="p-4 border-2 border-gray-200 rounded-xl hover:border-green-500 hover:bg-green-50 transition-all"
            >
              <div className="text-3xl mb-2">üîµ</div>
              <div className="text-sm font-semibold">Full Body A</div>
            </button>
            
            <button
              onClick={() => startWorkout('Full Body B')}
              className="p-4 border-2 border-gray-200 rounded-xl hover:border-teal-500 hover:bg-teal-50 transition-all"
            >
              <div className="text-3xl mb-2">üü¢</div>
              <div className="text-sm font-semibold">Full Body B</div>
            </button>
            
            <button
              onClick={() => startWorkout('Piscine')}
              className="p-4 border-2 border-gray-200 rounded-xl hover:border-cyan-500 hover:bg-cyan-50 transition-all"
            >
              <div className="text-3xl mb-2">üèä‚Äç‚ôÇÔ∏è</div>
              <div className="text-sm font-semibold">Piscine</div>
            </button>
            
            <button
              onClick={() => startWorkout('Repos')}
              className="p-4 border-2 border-gray-200 rounded-xl hover:border-gray-400 hover:bg-gray-50 transition-all"
            >
              <div className="text-3xl mb-2">üòå</div>
              <div className="text-sm font-semibold">Repos</div>
            </button>
          </div>

          <button
            onClick={() => setShowAddWorkout(false)}
            className="w-full mt-4 py-3 bg-gray-100 text-gray-700 rounded-lg font-semibold hover:bg-gray-200 transition-all"
          >
            Annuler
          </button>
        </div>
      </div>
    )}

    {/* Exercise Selector Modal */}
    {showExerciseSelector && (
      <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 overflow-y-auto">
        <div className="bg-white rounded-2xl shadow-2xl max-w-4xl w-full p-6 my-8 max-h-[90vh] overflow-y-auto">
          <div className="flex items-center justify-between mb-6 sticky top-0 bg-white pb-4 border-b">
            <h2 className="text-2xl font-bold text-gray-800">{currentWorkoutData?.type}</h2>
            <button
              onClick={() => {
                setShowExerciseSelector(false);
                setCurrentWorkoutData(null);
                setSelectedExercises([]);
              }}
              className="text-gray-500 hover:text-gray-700"
            >
              <X size={24} />
            </button>
          </div>

          {/* Selected Exercises */}
          {selectedExercises.length > 0 && (
            <div className="mb-6">
              <h3 className="text-lg font-bold text-gray-800 mb-3">Exercices s√©lectionn√©s</h3>
              {selectedExercises.map((exercise, exerciseIdx) => (
                <div key={exerciseIdx} className="mb-4 p-4 bg-gray-50 rounded-xl">
                  <div className="flex items-center justify-between mb-3">
                    <div>
                      <h4 className="font-bold text-gray-800">{exercise.name}</h4>
                      <p className="text-sm text-gray-600">{exercise.muscle}</p>
                    </div>
                    <button
                      onClick={() => setSelectedExercises(selectedExercises.filter((_, i) => i !== exerciseIdx))}
                      className="text-red-500 hover:text-red-700"
                    >
                      <Trash2 size={18} />
                    </button>
                  </div>

                  {/* Sets */}
                  <div className="space-y-2">
                    {exercise.sets.map((set, setIdx) => (
                      <div key={setIdx} className="flex items-center gap-2">
                        <button
                          onClick={() => toggleSetComplete(exerciseIdx, setIdx)}
                          className={`w-8 h-8 rounded-full flex items-center justify-center transition-all ${
                            set.completed ? 'bg-green-500 text-white' : 'bg-white border-2 border-gray-300'
                          }`}
                        >
                          {set.completed && <CheckCircle size={16} />}
                        </button>
                        
                        <span className="text-sm font-semibold text-gray-600 w-16">S√©rie {setIdx + 1}</span>
                        
                        <input
                          type="number"
                          value={set.weight}
                          onChange={(e) => updateSet(exerciseIdx, setIdx, 'weight', parseFloat(e.target.value) || 0)}
                          className="w-20 px-2 py-1 border-2 border-gray-200 rounded-lg text-center focus:border-blue-500 focus:outline-none"
                          placeholder="kg"
                        />
                        <span className="text-sm text-gray-600">kg √ó</span>
                        
                        <input
                          type="number"
                          value={set.reps}
                          onChange={(e) => updateSet(exerciseIdx, setIdx, 'reps', parseInt(e.target.value) || 0)}
                          className="w-20 px-2 py-1 border-2 border-gray-200 rounded-lg text-center focus:border-blue-500 focus:outline-none"
                          placeholder="reps"
                        />
                        <span className="text-sm text-gray-600">reps</span>
                        
                        <button
                          onClick={() => {
                            const updated = [...selectedExercises];
                            updated[exerciseIdx].sets.splice(setIdx, 1);
                            setSelectedExercises(updated);
                          }}
                          className="ml-auto text-red-400 hover:text-red-600"
                        >
                          <X size={18} />
                        </button>
                      </div>
                    ))}
                  </div>

                  <div className="flex gap-2 mt-3">
                    <button
                      onClick={() => addSetToExercise(exerciseIdx)}
                      className="flex-1 px-3 py-2 bg-blue-100 text-blue-600 rounded-lg text-sm font-semibold hover:bg-blue-200 transition-all"
                    >
                      + S√©rie
                    </button>
                    <button
                      onClick={() => startRestTimer(60)}
                      className="px-3 py-2 bg-orange-100 text-orange-600 rounded-lg text-sm font-semibold hover:bg-orange-200 transition-all"
                    >
                      ‚è±Ô∏è 1 min
                    </button>
                    <button
                      onClick={() => startRestTimer(90)}
                      className="px-3 py-2 bg-orange-100 text-orange-600 rounded-lg text-sm font-semibold hover:bg-orange-200 transition-all"
                    >
                      ‚è±Ô∏è 1:30
                    </button>
                    <button
                      onClick={() => startRestTimer(120)}
                      className="px-3 py-2 bg-orange-100 text-orange-600 rounded-lg text-sm font-semibold hover:bg-orange-200 transition-all"
                    >
                      ‚è±Ô∏è 2 min
                    </button>
                  </div>
                </div>
              ))}

              <div className="mb-4">
                <label className="block text-sm font-semibold text-gray-700 mb-2">Notes de s√©ance</label>
                <textarea
                  value={currentWorkoutData?.notes || ''}
                  onChange={(e) => setCurrentWorkoutData({...currentWorkoutData, notes: e.target.value})}
                  placeholder="Ex: Bonne forme sur le squat, augmenter charge la prochaine fois..."
                  rows="3"
                  className="w-full p-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none resize-none"
                />
              </div>

              <button
                onClick={saveWorkout}
                className="w-full py-4 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl font-bold text-lg hover:shadow-lg transition-all"
              >
                ‚úÖ Terminer la s√©ance
              </button>
            </div>
          )}

          {/* Exercise Library */}
          <div>
            <h3 className="text-lg font-bold text-gray-800 mb-3">Biblioth√®que d'exercices</h3>
            
            {Object.entries(defaultExercises).map(([category, exercises]) => (
              <div key={category} className="mb-4">
                <h4 className="text-md font-bold text-gray-700 mb-2 capitalize">
                  {category === 'chest' && 'üí™ Pectoraux'}
                  {category === 'back' && 'üîô Dos'}
                  {category === 'shoulders' && 'üèîÔ∏è √âpaules'}
                  {category === 'arms' && 'üí™ Bras'}
                  {category === 'legs' && 'ü¶µ Jambes'}
                  {category === 'core' && 'üéØ Abdos'}
                </h4>
                <div className="grid grid-cols-2 gap-2">
                  {exercises.map(exercise => (
                    <button
                      key={exercise.id}
                      onClick={() => addExerciseToWorkout(exercise)}
                      disabled={selectedExercises.some(e => e.id === exercise.id)}
                      className={`p-3 rounded-lg text-left transition-all ${
                        selectedExercises.some(e => e.id === exercise.id)
                          ? 'bg-green-100 border-2 border-green-500 cursor-not-allowed'
                          : 'bg-white border-2 border-gray-200 hover:border-blue-500 hover:bg-blue-50'
                      }`}
                    >
                      <div className="font-semibold text-sm text-gray-800">{exercise.name}</div>
                      <div className="text-xs text-gray-600">{exercise.muscle}</div>
                      {selectedExercises.some(e => e.id === exercise.id) && (
                        <div className="text-xs text-green-600 mt-1">‚úì Ajout√©</div>
                      )}
                    </button>
                  ))}
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>
    )}
  </div>
</div>
```

);
};

export default CompleteWorkoutTracker;